(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{170:function(t,e,n){"use strict";(function(t,e){var a=n(4);n(26);a(n(25));var r=a(n(171));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},171:function(t,e,n){"use strict";n.r(e);var a=n(172),r=n(174);for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n(180);var i,u=n(34),c=Object(u["default"])(r["default"],a["render"],a["staticRenderFns"],!1,null,"57280228",null,!1,a["components"],i);c.options.__file="pages/index/index.vue",e["default"]=c.exports},172:function(t,e,n){"use strict";n.r(e);var a=n(173);n.d(e,"render",(function(){return a["render"]})),n.d(e,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(e,"components",(function(){return a["components"]}))},173:function(t,e,n){"use strict";var a;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return i})),n.d(e,"recyclableRender",(function(){return o})),n.d(e,"components",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.branchList,(function(e,n){var a=t.__get_orig(e),r=t.mkm(e.distance);return{$orig:a,m0:r}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},o=!1,i=[];r._withStripped=!0},174:function(t,e,n){"use strict";n.r(e);var a=n(175),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a},175:function(t,e,n){"use strict";(function(t){var a=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(58)),o=a(n(60)),i=a(n(11)),u=a(n(176)),c=n(164);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=function(){n.e("components/login").then(function(){return resolve(n(301))}.bind(null,n)).catch(n.oe)},f=new u.default.QQMapWX({key:"E7EBZ-RX2CN-JVRFG-SQVDG-FFK66-4BB6T"}),p={components:{loginBtn:l},data:function(){return{statusBarHeight:this.StatusBarHeight,fnList:[{name:"线上咨询",url:n(177),path:"/pages/chat/chat"},{name:"线下网点",url:n(178),path:"/pages/branch/branch"},{name:"诉讼垫款",url:n(179),path:"/pages/assistApply/assistApply"}],branchList:[],m:"",pageSize:100,pageNum:1}},computed:d({},(0,c.mapState)(["latlong","userInfo"])),onShow:function(){this.getLocation()},onLoad:function(){},methods:d(d({},(0,c.mapMutations)(["setLatLong"])),{},{mkm:function(t){var e=t.toFixed(0);return e.toString().length>3?(e/1e3).toFixed(2)+"km":e+"m"},jump:function(e){var n=this,a=this;if(t.getStorageSync("token"))return"/pages/chat/chat"==e?(t.showLoading({title:"正在为你匹配法律顾问...",icon:"none"}),void this.$http.onlineUser().then(function(){var i=(0,o.default)(r.default.mark((function o(i){var u,c,s;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(500!=i.code){r.next=10;break}return r.next=3,n.$http.offlineUser();case 3:return u=r.sent,r.next=6,n.$http.createChat({isOnline:1,date:new Date,isRead:0,text:" ",type:10,userIdFrom:a.userInfo.userId,userIdTo:u.data.userId});case 6:return c=r.sent,s={to_id:u.data.userId,to_name:u.data.nickName,to_avatar:u.data.avatar,chat_type:"1",chatRoomNumber:c.data},t.hideLoading(),r.abrupt("return",t.navigateTo({url:e+"?params="+encodeURIComponent(JSON.stringify(s))}));case 10:n.toChat(i);case 11:case"end":return r.stop()}}),o)})));return function(t){return i.apply(this,arguments)}}())):void t.navigateTo({url:e});this.$refs.loginBtn.isToken()},toChat:function(e){var n=this;return(0,o.default)(r.default.mark((function a(){var o,i,u;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=n,a.next=3,n.$http.createChat({date:new Date,isRead:0,text:" ",type:"-1",userIdFrom:o.userInfo.userId,userIdTo:e.data.userId});case 3:i=a.sent,u={to_id:e.data.userId,to_name:e.data.nickName,to_avatar:e.data.avatar,chat_type:"1",chatRoomNumber:i.data},t.hideLoading(),t.navigateTo({url:"/pages/chat/chat?params="+encodeURIComponent(JSON.stringify(u))});case 7:case"end":return a.stop()}}),a)})))()},cultivate:function(){t.getStorageSync("token")?t.navigateTo({url:"/pages/cultivate/cultivate"}):this.$refs.loginBtn.isToken()},reservation:function(e){t.getStorageSync("token")?t.navigateTo({url:"/pages/reservation/reservation",success:function(t){t.eventChannel.emit("info",e)}}):this.$refs.loginBtn.isToken()},getAppletList:function(e){var n=this;return(0,o.default)(r.default.mark((function a(){var o;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n,t.showLoading({title:"获取附近网点"}),a.next=4,n.$http.appletList(d(d({},e),{},{pageSize:n.pageSize,pageNum:n.pageNum}));case 4:o=a.sent,t.hideLoading(),n.branchList=o.rows;case 7:case"end":return a.stop()}}),a)})))()},getLocation:function(){var e=this;t.getLocation({type:"gcj02",geocode:!0,isHighAccuracy:!0,highAccuracyExpireTime:4e3,timeout:5,success:function(n){t.showLoading({title:"正在获取附近线下网点"}),console.log("获取经纬度成功",n),f.reverseGeocoder({location:{latitude:n.latitude,longitude:n.longitude},success:function(t){}}),e.setLatLong({latitude:n.latitude,longitude:n.longitude}),e.getAppletList({userLongitude:n.longitude,userLatitude:n.latitude})},fail:function(t){console.log("获取经纬度失败",t),e.getAppletList({userLongitude:e.latlong.longitude,userLatitude:e.latlong.latitude})},complete:function(t){console.log("???",t)}})}})};e.default=p}).call(this,n(2)["default"])},180:function(t,e,n){"use strict";n.r(e);var a=n(181),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a},181:function(t,e,n){}},[[170,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index/index.js.map